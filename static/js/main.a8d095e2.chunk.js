(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{106:function(e,t,n){e.exports={main:"app_main__4WY5S"}},107:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__GptCg"}},109:function(e,t,n){e.exports={loader:"loader_loader__31hZl",spin:"loader_spin__lUbWN"}},111:function(e,t,n){e.exports={bgForCheck:"order-details_bgForCheck__N9L3q"}},112:function(e,t,n){e.exports={menu:"profile-menu_menu__FyA3k"}},113:function(e,t,n){e.exports={main:"scrollable-list_main__GQsmK",mainReversed:"scrollable-list_mainReversed__1l3w3 scrollable-list_main__GQsmK",temporary:"scrollable-list_temporary__2Sl_A"}},123:function(e,t,n){},14:function(e,t,n){e.exports={wrap:"ingridient-details_wrap__2-LFK",modalHeader:"ingridient-details_modalHeader__24jdl",ingrImage:"ingridient-details_ingrImage__RdR48",ingrInfo:"ingridient-details_ingrInfo__3X3TC",nutrient:"ingridient-details_nutrient__3Wg7v",nutrientHeader:"ingridient-details_nutrientHeader__3rb3o",nutrientValue:"ingridient-details_nutrientValue__2SB2D"}},15:function(e,t,n){e.exports={header:"app-header_header__180fU","header-flex":"app-header_header-flex__1o29S",headerContainer:"app-header_headerContainer__2jzR7 app-header_header-flex__1o29S",userPanel:"app-header_userPanel__2yC6l",navBurgerBuilder:"app-header_navBurgerBuilder__1RlW_ app-header_header-flex__1o29S",navButton:"app-header_navButton__wvEce app-header_header-flex__1o29S",authButton:"app-header_authButton__kXkIa app-header_header-flex__1o29S app-header_navButton__wvEce app-header_header-flex__1o29S",headerButton:"app-header_headerButton__11GTm",navlink:"app-header_navlink__3NGjM",buttonCaption:"app-header_buttonCaption__2t1No"}},16:function(e,t,n){e.exports={headerSection:"feed_headerSection__2SA8r",feedData:"feed_feedData__2gA4q",feedContent:"feed_feedContent__1be4i",feedChart:"feed_feedChart__2K5WE",currentOrders:"feed_currentOrders__HPNg_",currentChart:"feed_currentChart__2UtwH",ul:"feed_ul__3o8oq",liElem:"feed_liElem__Aza89",totalChart:"feed_totalChart__2PRp9",totalBlock:"feed_totalBlock__3xVl2",bigHeader:"feed_bigHeader__2XETl"}},18:function(e,t,n){e.exports={main:"feed-detailed-card_main__2hLf4",number:"feed-detailed-card_number__ZaSDA",header:"feed-detailed-card_header__2hNWO",status:"feed-detailed-card_status__3_eZx",ingr:"feed-detailed-card_ingr__iXNXz",plane:"feed-detailed-card_plane__1jLyT",ingrList:"feed-detailed-card_ingrList__7ud1P",price:"feed-detailed-card_price__2LbHd",imgContainer:"feed-detailed-card_imgContainer__puxWu",ingrItem:"feed-detailed-card_ingrItem__3WPOa",ingrIdent:"feed-detailed-card_ingrIdent__2ujAz",priceContainer:"feed-detailed-card_priceContainer__1umxu",ingrPrice:"feed-detailed-card_ingrPrice__3ESz0"}},198:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(42),i=n.n(c),s=(n(123),n(106)),o=n.n(s),l=n(11),d=n(52),u=d.c,j=function(){return Object(d.b)()},b=n(31),m=n.n(b),p=n(43);function _(e,t,n){var a=(n=n||{}).expires;if("number"==typeof a&&a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r}a&&a.toUTCString&&(n.expires=a.toUTCString()),t&&(t=encodeURIComponent(t));var c=e+"="+t;for(var i in n){c+="; "+i;var s=n[i];!0!==s&&(c+="="+s)}document.cookie=c}var f=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},h=function(){var e=f("accessToken");return e=e?e.split("Bearer ")[1]:""};function g(e){_(e,null,{expires:-1})}var O="https://norma.nomoreparties.space/api",x=O+"/auth/user",v="wss://norma.nomoreparties.space/orders",y=v+"/all";function N(e){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C="LOGIN_SUCCESSFUL",D="SET_USER_DATA",S="LOGIN_FAILED",E="LOGOUT_SUCCESSFUL",k="ALLOW_RESET_PASSWORD",w="HAS_RESET_PASSWORD",T=function(e){return function(t){(function(e){return fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(N).then((function(e){return e}))})(e).then((function(e){var n=e.user,a=e.accessToken,r=e.refreshToken;t({type:C,name:n.name,email:n.email,isLoggedIn:!0}),_("accessToken",a,{expires:1200}),localStorage.setItem("refreshToken",r)})).catch((function(e){}))}},L=function(e){return function(t){(function(e){return fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(N).then((function(e){return e}))})(e).then((function(e){var n=e.user,a=e.accessToken,r=e.refreshToken;!0===e.success&&(t({type:C,name:n.name,email:n.email}),_("accessToken",a,{expires:1200}),localStorage.setItem("refreshToken",r))})).catch((function(e){t({type:S})}))}},R=function(){return function(e){fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(N).then((function(e){return e.success,e})).then((function(t){!0===t.success&&(g("accessToken"),localStorage.removeItem("refreshToken"),e({type:E}))})).catch((function(t){g("accessToken"),localStorage.removeItem("refreshToken"),e({type:E})}))}},P=function(e){return function(t){var n;(n=e,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:n})}).then(N).then((function(e){return e}))).then((function(e){!0===e.success&&(t({type:k}),_("canResetPassword","yes",{expires:3600}))})).catch((function(e){}))}},B=function(e,t){return function(n){(function(e,t){return fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:e,token:t})}).then(N).then((function(e){return e}))})(e,t).then((function(e){!0===e.success&&(n({type:w}),_("canResetPassword","no",{expires:-1}))})).catch((function(e){}))}},A=function(e,t){return function(n){(function(e){return fetch(x,{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:f("accessToken")},body:JSON.stringify({name:e.name,email:e.email,password:e.password})}).then(N).then((function(e){return e.success,e}))})(e).then((function(e){n({type:D,name:e.user.name,email:e.user.email}),t({name:e.user.name,email:e.user.email,password:""})}))}},V=function(e){return function(t){fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(N).then((function(e){return!1!==e.success&&e})).then((function(n){var a=n.accessToken,r=n.refreshToken;_("accessToken",a,{expires:1200}),localStorage.setItem("refreshToken",r),t(M(e))})).catch((function(e){}))}},M=function(e){return++e>2?function(){}:function(t){fetch(x,{headers:{method:"GET","Content-Type":"application/json;charset=utf-8",authorization:f("accessToken")}}).then(N).then((function(e){return e.success,e})).then((function(e){var n=e.user;!0===e.success&&t({type:D,name:n.name,email:n.email})})).catch((function(n){"jwt expired"===n.message&&t(V(e))}))}},H=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null!=f("accessToken"),a=null!=localStorage.getItem("refreshToken"),!n){e.next=6;break}return 0,t(M(0)),e.abrupt("return","has logged in");case 6:if(n||!a){e.next=10;break}return 1,t(V(1)),e.abrupt("return","has refreshed tokens, than logged in");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G="TOGGLE_MODAL_VISIBILITY",U="SET_CURRENT_MODAL_TYPE",F="SET_INGRIDIENT_IN_MODAL",W="SET_ORDER_STATE",z="INGRIDIENT_FETCH_SUCCESS",J="INGRIDIENT_FETCH_ERROR",X="OPEN_MODAL",q="CLOSE_MODAL",Y="SET_CURRENT_MODAL_TYPE",K="ADD_BUN",Z="ADD_SAUCE",Q="ADD_MAIN",$="UPDATE_DRAGGABLE_INGRIDIENTS",ee="REMOVE_ALL_INGRIDIENTS",te="RESORT_DRAGGABLE_INGRIDIENTS",ne="SET_CONSTRUCTOR_LOADER",ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return function(n){n({type:ne,value:!0}),fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:f("accessToken")},body:JSON.stringify(t())}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){n({type:W,value:e}),n({type:ne,value:!1})})).then((function(){n({type:X}),n({type:Y,value:"OrderDetails"}),n({type:ee})})).catch((function(e){}))}},re=n(2),ce=n(117),ie=n(0);function se(e){var t=e.children,n=Object(ce.a)(e,["children"]),a=u((function(e){return e.user})),r=a.isLoggedIn,c=a.userChecked;return localStorage.getItem("refreshToken")&&!c?null:Object(ie.jsx)(l.b,Object(re.a)(Object(re.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(ie.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))}var oe=n(82),le=n.n(oe),de=n(107),ue=n.n(de),je=function(e){var t=e.handleClick,n=e.children;return Object(ie.jsx)("div",{className:ue.a.modalOverlay,onClick:t,children:n})},be=n(6),me=function(e){var t=e.children,n=e.handleClose,r=document.getElementById("react-modals");return Object(a.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),i.a.createPortal(Object(ie.jsx)(je,{handleClick:n,children:Object(ie.jsxs)("article",{className:le.a.modal,onClick:function(e){e.stopPropagation()},children:[Object(ie.jsx)("button",{onClick:n,className:le.a.closeButton,children:Object(ie.jsx)(be.CloseIcon,{type:"primary"})}),t]})}),r)},pe=n(14),_e=n.n(pe);var fe=function(e){var t=e.ingredientData;return Object(ie.jsxs)("div",{className:_e.a.wrap,children:[Object(ie.jsx)("h2",{className:_e.a.modalHeader+" text  text_type_main-large mt-10 ml-10 mb-3",style:{},children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(ie.jsx)("img",{src:t.image_large,alt:t.name,className:_e.a.ingrImage+" mb-4"}),Object(ie.jsx)("p",{className:"text  text_type_main-medium mb-4",children:t.name}),Object(ie.jsxs)("ul",{className:_e.a.ingrInfo,children:[Object(ie.jsxs)("li",{className:_e.a.nutrient,children:[Object(ie.jsx)("h5",{className:_e.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(ie.jsx)("p",{className:_e.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_calories",children:t.calories})]}),Object(ie.jsxs)("li",{className:_e.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ie.jsx)("h5",{className:_e.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ie.jsx)("p",{className:_e.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_proteins",children:t.proteins})]}),Object(ie.jsxs)("li",{className:_e.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ie.jsx)("h5",{className:_e.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ie.jsx)("p",{className:_e.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_fats",children:t.fat})]}),Object(ie.jsxs)("li",{className:_e.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ie.jsx)("h5",{className:_e.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ie.jsx)("p",{className:_e.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_carbo",children:t.carbohydrates})]})]})]})},he=n(15),ge=n.n(he),Oe=n(9);var xe=function(){return Object(ie.jsx)("header",{className:ge.a.header,children:Object(ie.jsxs)("div",{className:ge.a.headerContainer,children:[Object(ie.jsx)("nav",{className:"text text_type_main-default",children:Object(ie.jsxs)("ul",{className:ge.a.navBurgerBuilder,children:[Object(ie.jsx)("li",{className:ge.a.headerButton,children:Object(ie.jsx)(Oe.b,{to:"/",className:ge.a.navlink,children:Object(ie.jsxs)("div",{className:ge.a.navButton,children:[Object(ie.jsx)(be.BurgerIcon,{type:"primary"}),Object(ie.jsx)("span",{className:ge.a.buttonCaption,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})})}),Object(ie.jsx)("li",{className:ge.a.headerButton,children:Object(ie.jsx)(Oe.b,{to:"/feed",className:ge.a.navlink,children:Object(ie.jsxs)("div",{className:ge.a.navButton+"  text_color_inactive",children:[Object(ie.jsx)(be.ListIcon,{type:"secondary"}),Object(ie.jsx)("span",{className:ge.a.buttonCaption,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})})]})}),Object(ie.jsx)(Oe.b,{to:"/",children:Object(ie.jsx)(be.Logo,{})}),Object(ie.jsx)("nav",{className:ge.a.userPanel+" text text_type_main-default",children:Object(ie.jsxs)(Oe.b,{className:ge.a.authButton+" "+ge.a.navlink+"  text_color_inactive",to:"/profile",children:[Object(ie.jsx)(be.ProfileIcon,{type:"secondary"}),Object(ie.jsx)("span",{className:ge.a.buttonCaption,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},ve=n(83),ye=n.n(ve),Ne=n(10),Ie=n(30),Ce=n.n(Ie),De=n(61),Se=n.n(De),Ee=n(209),ke=n(205),we=function(e){var t=e.objIngridient,n=j(),c=Object(l.g)(),i=Object(l.h)(),s=Object(Ee.a)({type:"ingridient",item:t,collect:function(e){return{outline:e.isDragging()?"1px solid #4C4CFF":""}}}),o=Object(Ne.a)(s,3),d=o[0].outline,b=o[1],m=o[2],p=r.a.useState(),_=Object(Ne.a)(p,2),f=_[0],h=_[1],g=u((function(e){if("bun"===t.type)return e.burgerVendor.bun})),O=u((function(e){if("sauce"===t.type||"main"===t.type)return e.burgerVendor.draggableIngridients}));return Object(a.useEffect)((function(){h(function(){var e=0;return"bun"===t.type&&g&&g._id===t._id?2:(!O||"sauce"!==t.type&&"main"!==t.type||O.forEach((function(n){n._id===t._id&&e++})),e)}())}),[g,O,t]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(ke.a,{connect:m,src:t.image}),Object(ie.jsxs)("div",{className:Se.a.ingrCard+" mb-8",onClick:function(){n({type:X}),n({type:Y,value:"IngridientDetails"}),n({type:F,value:t}),c.push({pathname:"/ingredients/".concat(t._id),state:{ingredientModal:i}})},ref:b,style:{outline:d},children:[Object(ie.jsx)("img",{src:t.image,alt:t.name,className:Se.a.itemPic}),Object(ie.jsxs)("div",{className:Se.a.price,children:[!!f&&Object(ie.jsx)(be.Counter,{count:f,size:"default"}),Object(ie.jsx)("span",{className:"m-2 text_type_digits-default",children:t.price}),Object(ie.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(ie.jsx)("h3",{className:"m-1 text_type_main-default",children:t.name})]})]})},Te=function(e){var t=e.type,n=u((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})).filter((function(e){return e.type===t}));return Object(ie.jsx)(ie.Fragment,{children:n.map((function(e,t){return Object(ie.jsx)(we,{objIngridient:e},e._id)}))})};var Le=function(){var e=r.a.useState("bun"),t=Object(Ne.a)(e,2),n=t[0],c=t[1],i=Object(a.useRef)(null),s=Object(a.useRef)(null),o=Object(a.useRef)(null),l=Object(a.useRef)(null),d=function(e){c(e),function(e){var t;"bun"===e?t=i:"sauce"===e?t=s:"main"===e&&(t=o),t&&t.current&&t.current.scrollIntoView({block:"start",behavior:"smooth"})}(e)};return Object(ie.jsxs)("section",{className:Ce.a.ingridiensContainer,children:[Object(ie.jsxs)("div",{className:Ce.a.tabs,children:[Object(ie.jsx)(be.Tab,{value:"bun",active:"bun"===n,onClick:d,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ie.jsx)(be.Tab,{value:"sauce",active:"sauce"===n,onClick:d,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ie.jsx)(be.Tab,{value:"main",active:"main"===n,onClick:d,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(ie.jsxs)("div",{className:Ce.a.ingrDisplay+" mt-10",ref:l,onScroll:function(){var e=l.current?l.current.getBoundingClientRect().top:0,t=i.current?i.current.getBoundingClientRect().top:0,n=s.current?s.current.getBoundingClientRect().top:0,a=o.current?o.current.getBoundingClientRect().top:0,r=Math.abs(e-t),d=Math.abs(e-n),u=Math.abs(e-a);c(r<d?"bun":d<u?"sauce":"main")},children:[Object(ie.jsxs)("div",{className:Ce.a.ingrShowcase,ref:i,children:[Object(ie.jsx)("h3",{className:"text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ie.jsx)("div",{className:Ce.a.ingrList,children:Object(ie.jsx)(Te,{type:"bun"})})]}),Object(ie.jsxs)("div",{className:Ce.a.ingrShowcase,ref:s,children:[Object(ie.jsx)("h3",{className:"text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ie.jsx)("div",{className:Ce.a.ingrList,children:Object(ie.jsx)(Te,{type:"sauce"})})]}),Object(ie.jsxs)("div",{className:Ce.a.ingrShowcase,ref:o,children:[Object(ie.jsx)("h3",{className:"text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(ie.jsx)("div",{className:Ce.a.ingrList,children:Object(ie.jsx)(Te,{type:"main"})})]})]})]})},Re=n(37),Pe=n.n(Re),Be=n(85),Ae=n.n(Be),Ve=n(210),Me=function(e){var t=e.ingrInstanceID,n=e.ingrData,a=e.ingrIndexInStoreArr,r=e.resortIngrList,c=e.findIngridient,i=j(),s=u((function(e){return e.burgerVendor.draggableIngridients})),o=Object(Ee.a)((function(){return{type:"draggableIngridient",item:{ingrInstanceID:t,ingrIndexInStoreArr:a},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()||r(e.ingrInstanceID,e.ingrIndexInStoreArr)}}}),[t,a,r]),l=Object(Ne.a)(o,3),d=l[0].isDragging,b=l[1],m=l[2],p=Object(Ve.a)((function(){return{accept:"draggableIngridient",canDrop:function(){return!1},hover:function(e){var n=e.ingrInstanceID;if(n!==t){var a=c(t).ingrIndexInStore;r(n,a)}}}}),[c,r]),_=Object(Ne.a)(p,2)[1],f=d?0:1;return Object(ie.jsxs)("div",{className:Ae.a.draggableItime,ref:function(e){return _(m(e))},style:{opacity:f},children:[Object(ie.jsx)("button",{ref:b,className:Ae.a.draggableButton,children:Object(ie.jsx)(be.DragIcon,{type:"primary"})}),Object(ie.jsx)(be.ConstructorElement,{text:n.name,thumbnail:n.image,price:n.price,handleClose:function(){var e=s.slice(0);e.splice(a,1),i({type:$,value:e})}})]})},He=n(109),Ge=n.n(He),Ue=function(){return Object(ie.jsx)("div",{className:Ge.a.loader})},Fe=n(110),We=n(207),ze=n(212),Je=n(208),Xe=n(211),qe=function(e){var t=new Date,n=new Date(e),a=Object(We.a)(n,"HH:mm ")+"i-"+Object(We.a)(n,"O"),r=Object(ze.a)(t.getTime(),n.getTime()),c="";return c=0===r?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===r?"\u0412\u0447\u0435\u0440\u0430":r<5?"".concat(r," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434"):r<20?"".concat(r," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434"):"".concat(Object(Je.a)(new Date(n),Date.now(),{locale:Xe.a})," \u043d\u0430\u0437\u0430\u0434"),"".concat(c,", ").concat(a)},Ye=function(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"pending":return"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";default:return"\u041e\u0442\u043c\u0435\u043d\u0451\u043d"}},Ke=function(e){return e.reduce((function(e,t){return e+t.price}),0)},Ze=function(e,t){var n,a=[],r=Object(Fe.a)(e.ingredients);try{var c=function(){var e=n.value;t.forEach((function(t){t._id===e&&a.push(t)}))};for(r.s();!(n=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}return a};var Qe=function(){var e=j(),t=Object(l.g)(),n=u((function(e){return{chosenBun:e.burgerVendor.bun,chosenDraggableIngr:e.burgerVendor.draggableIngridients,isLoggedIn:e.user.isLoggedIn,loaderIsVisible:e.burgerVendor.constructorLoaderIsVisible}})),r=n.chosenBun,c=n.chosenDraggableIngr,i=n.isLoggedIn,s=n.loaderIsVisible,o=function(t){var n,a=Object(re.a)(Object(re.a)({},t),{},{instanceID:(new Date).getTime()});e({type:(n=t.type,"bun"===n?K:"sauce"===n?Z:"main"===n?Q:"error"),value:a})},d=Object(Ve.a)({accept:"ingridient",drop:function(e){!function(e){o(e)}(e)},collect:function(e){return{background:e.isOver()?"radial-gradient(circle, rgba(63,94,251,0.6110819327731092) 0%, rgba(252,70,107,0) 44%)":""}}}),b=Object(Ne.a)(d,2),_=b[0].background,f=b[1],h=Object(a.useCallback)((function(e){var t=c.filter((function(t){return t.instanceID===e}))[0];return{objIngrData:t,ingrIndexInStore:c.indexOf(t)}}),[c]),g=function(t,n){var a=h(t).ingrIndexInStore;e({type:te,indexOfDraggedIngr:a,indexOfDroppedIngr:n})},O=Object(Ve.a)((function(){return{accept:"draggableIngridient"}})),x=Object(Ne.a)(O,2)[1];function v(){var e=[];return e.push(r._id),c.forEach((function(t){e.push(t._id)})),{ingredients:e}}var y=function(){var n=Object(p.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return",t.push({pathname:"/login"}));case 2:return n.abrupt("return",e(ae("https://norma.nomoreparties.space/api/orders",v)));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(ie.jsxs)("section",{className:Pe.a.container,ref:f,style:{background:_},children:[s?Object(ie.jsx)("div",{className:Pe.a.loader,children:Object(ie.jsx)(Ue,{})}):null,Object(ie.jsxs)("ul",{className:Pe.a.chosenIngridients+" mb-6",children:[r.name&&Object(ie.jsx)("li",{className:Pe.a.topIngridinet,children:Object(ie.jsx)(be.ConstructorElement,{type:"top",isLocked:!0,text:r.name+" (\u0432\u0435\u0440\u0445)",thumbnail:r.image,price:r.price})}),c.length>0&&Object(ie.jsx)("li",{className:Pe.a.draggableIngridinetContainer,ref:x,children:c.map((function(e,t){return Object(ie.jsx)(Me,{ingrInstanceID:e.instanceID,ingrData:e,ingrIndexInStoreArr:t,resortIngrList:g,findIngridient:h},e.instanceID)}))}),r.name&&Object(ie.jsx)("li",{className:Pe.a.bottomIngridinet,children:Object(ie.jsx)(be.ConstructorElement,{type:"bottom",isLocked:!0,text:r.name+" (\u043d\u0438\u0437)",thumbnail:r.image,price:r.price})})]}),Object(ie.jsx)("div",{className:Pe.a.totalBar,children:r.name&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[function(){var e=2*r.price,t=0;return c.length>0&&(t=c.reduce((function(e,t){return e+Number(t.price)}),0)),e+t}(),Object(ie.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(ie.jsx)(be.Button,{type:"primary",size:"large",onClick:y,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})||Object(ie.jsx)("div",{style:{margin:"0 auto"},children:!r.name&&c.length<1&&Object(ie.jsxs)("span",{className:"text text_type_main-medium mr-10",style:{textAlign:"center",justifyContent:"center",display:"table-cell",paddingRight:"40px"},children:["\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b, ",Object(ie.jsx)("br",{}),"\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0431\u0443\u0440\u0433\u0435\u0440"]})||Object(ie.jsx)("span",{className:"text text_type_main-medium mr-10",style:{},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})})})]})},$e=n(111),et=n.n($e),tt=function(){var e=u((function(e){return e.burgerVendor.orderData}));return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("h2",{className:"text text_type_digits-large mt-30 mb-2",children:e.order.number}),Object(ie.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ie.jsx)("div",{className:et.a.bgForCheck+" mb-15"}),Object(ie.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ie.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},nt=n(206),at=n(116),rt=function(e){var t=e.handleClose,n=u((function(e){return{modalIsVisible:e.burgerVendor.modalIsVisible,currentModalType:e.burgerVendor.currentModalType,ingrInModalData:e.burgerVendor.ingrInModalData,arrOfIngridients:e.burgerVendor.ingridientsData.arrOfIngridients,dataIsLoading:e.burgerVendor.ingridientsData.ingrDataIsLoading,dataHasError:e.burgerVendor.ingridientsData.ingrDataHasError}})),a=n.modalIsVisible,r=n.currentModalType,c=n.arrOfIngridients,i=n.dataIsLoading,s=n.dataHasError;return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("section",{className:ye.a.headerSection,children:Object(ie.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(ie.jsx)("section",{className:ye.a.constructorContainer,children:!i&&!s&&!!c&&!!c.length&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)(nt.a,{backend:at.a,children:[Object(ie.jsx)(Le,{}),Object(ie.jsx)(Qe,{})]}),a&&"OrderDetails"===r&&Object(ie.jsx)(me,{handleClose:t,children:Object(ie.jsx)(tt,{})})]})})]})},ct=n(18),it=n.n(ct),st=function(){var e=u((function(e){return e.ws.detailedOrder})),t=u((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})),n=null,a=null,r=null;t&&e&&(n=t.filter((function(t){return e.ingredients.includes(t._id)})),a=(r=t.filter((function(t){return e.ingredients.includes(t._id)})))[0],r=r.slice(1));var c=function(e){return Object(ie.jsx)("div",{className:it.a.imgContainer,style:{backgroundImage:"url(".concat(e,")")}})},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return e?Object(ie.jsxs)("li",{className:it.a.ingrItem,children:[Object(ie.jsxs)("div",{className:it.a.ingrIdent,children:[c(e.image_mobile),Object(ie.jsx)("span",{className:" text text_type_main-default",children:e.name})]}),Object(ie.jsxs)("div",{className:it.a.priceContainer,children:[Object(ie.jsxs)("span",{className:it.a.ingrPrice+" text text_type_digits-default",children:[t," x ",e.price]}),Object(ie.jsx)(be.CurrencyIcon,{type:"primary"})]})]},n):null};return Object(ie.jsxs)("article",{className:it.a.main,children:[Object(ie.jsxs)("span",{className:it.a.number+" text text_type_digits-default mb-10",children:[" ",e.number," "]}),Object(ie.jsxs)("h4",{className:it.a.header+" text text_type_main-medium mb-2",children:[" ",e.name," "]}),Object(ie.jsx)("span",{className:it.a.status+" text text_type_main-default mb-15",children:Ye(e.status)}),Object(ie.jsx)("h5",{className:it.a+" text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ie.jsxs)("ul",{className:it.a.ingrList,children:[a?i(a,2,999):null,r?r.map((function(e,t){return i(e,1,t)})):null]}),Object(ie.jsxs)("div",{className:it.a.plane,children:[Object(ie.jsx)("span",{className:" text text_type_main-default text_color_inactive",children:qe(e.createdAt)}),Object(ie.jsxs)("div",{className:it.a.price,children:[Object(ie.jsx)("span",{className:" text text_type_digits-default mr-2",children:n?Ke(Ze(e,t)):null}),Object(ie.jsx)(be.CurrencyIcon,{type:"primary"})]})]})]})},ot=n(23),lt=n(25),dt=n.n(lt);function ut(){var e=Object(a.useState)({email:"",password:""}),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=u((function(e){return e.user})).isLoggedIn,i=j(),s=Object(l.h)();Object(a.useEffect)((function(){i(H())}),[i]);var o,d=function(e){r(Object(re.a)(Object(re.a)({},n),{},Object(ot.a)({},e.target.name,e.target.value)))},b=Object(a.useCallback)((function(e){e.preventDefault(),i(L(n))}),[n,i]);return c?Object(ie.jsx)(l.a,{to:(null===(o=s.state)||void 0===o?void 0:o.from)||"/"}):Object(ie.jsx)("div",{className:dt.a.wrap,children:Object(ie.jsxs)("form",{className:"auth-form "+dt.a.form,onSubmit:b,children:[Object(ie.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(ie.jsx)(be.Input,{type:"email",placeholder:"E-mail",value:n.email,name:"email",onChange:d,error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ie.jsx)(be.PasswordInput,{value:n.password,name:"password",size:"default",onChange:d}),Object(ie.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(ie.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(ie.jsx)(Oe.b,{to:"/registration",className:"text_color_link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ie.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ie.jsx)(Oe.b,{to:"/forgot-password",className:"text_color_link",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})}function jt(){var e=Object(a.useState)({email:"",name:"",password:""}),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=u((function(e){return e.user})).isLoggedIn,i=j();Object(a.useEffect)((function(){i(H())}),[i]),Object(a.useEffect)((function(){r({email:"oladuwki@yandex.ru",name:"Oladuwki",password:"123123"})}),[c]);var s=function(e){r(Object(re.a)(Object(re.a)({},n),{},Object(ot.a)({},e.target.name,e.target.value)))},o=Object(a.useCallback)((function(e){e.preventDefault(),i(T(n))}),[i,n]);return c?Object(ie.jsx)(l.a,{to:{pathname:"/"}}):Object(ie.jsx)("div",{className:dt.a.wrap,children:Object(ie.jsxs)("form",{className:"auth-form "+dt.a.form,onSubmit:o,children:[Object(ie.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ie.jsx)(be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n.name,name:"name",onChange:s,error:!1,errorText:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0433\u0430\u043b\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430"}),Object(ie.jsx)(be.Input,{type:"email",placeholder:"E-mail",value:n.email,name:"email",onChange:s,error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ie.jsx)(be.PasswordInput,{value:n.password,name:"password",size:"default",onChange:s}),Object(ie.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(ie.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(ie.jsx)(Oe.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}function bt(){var e=Object(a.useState)({email:""}),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=u((function(e){return e.user})),i=c.isLoggedIn,s=c.canResetPassword,o=j();Object(a.useEffect)((function(){r({email:"shamko.e.v@yandex.ru"})}),[]),Object(a.useEffect)((function(){o(H())}),[o]);var d=Object(a.useCallback)((function(e){e.preventDefault(),o(P(n.email))}),[o,n]);return i?Object(ie.jsx)(l.a,{to:{pathname:"/"}}):!i&&s?Object(ie.jsx)(l.a,{to:{pathname:"/reset-password"}}):Object(ie.jsx)("div",{className:dt.a.wrap,children:Object(ie.jsxs)("form",{className:"auth-form "+dt.a.form,onSubmit:d,children:[Object(ie.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ie.jsx)(be.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:n.email,name:"email",onChange:function(e){r(Object(re.a)(Object(re.a)({},n),{},Object(ot.a)({},e.target.name,e.target.value)))},error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ie.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(ie.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ie.jsx)(Oe.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}function mt(){var e=Object(a.useState)({password:"",resetCode:""}),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=u((function(e){return e.user})),i=c.isLoggedIn,s=c.canResetPassword,o=c.hasResetPassword,d=j(),b=function(e){r(Object(re.a)(Object(re.a)({},n),{},Object(ot.a)({},e.target.name,e.target.value)))},m=Object(a.useCallback)((function(e){e.preventDefault();var t=n.password,a=n.resetCode;console.log("newPassword",t),console.log("resetCode",a),d(B(t,a)),r(Object(re.a)(Object(re.a)({},n),{},{password:""}))}),[d,n]);return i?Object(ie.jsx)(l.a,{to:{pathname:"/"}}):o?(console.log("has reset password"),Object(ie.jsx)(l.a,{to:{pathname:"/login"}})):s||"yes"===f("canResetPassword")?Object(ie.jsx)("div",{className:dt.a.wrap,children:Object(ie.jsxs)("form",{className:"auth-form "+dt.a.form,onSubmit:m,children:[Object(ie.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ie.jsx)(be.PasswordInput,{value:n.password,name:"password",size:"default",onChange:b}),Object(ie.jsx)(be.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:n.resetCode,name:"resetCode",onChange:b,error:!1,errorText:""}),Object(ie.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(ie.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ie.jsx)(Oe.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}):Object(ie.jsx)(l.a,{to:{pathname:"/forgot-password"}})}var pt=n(39),_t=n.n(pt),ft=n(112),ht=n.n(ft),gt=n(87),Ot=n.n(gt),xt=function(e){var t=e.children,n=e.value,a=e.isActive,c=e.onClick,i="".concat(Ot.a.tab," ").concat(a?Ot.a.tab_type_current:""),s=r.a.useCallback((function(){"function"!==typeof c||a||c(n)}),[c,n,a]);return Object(ie.jsx)("div",{className:"".concat(i," pt-4 pr-10 pb-4 noselect"),onClick:s,children:Object(ie.jsx)("span",{className:"text text_type_main-medium",children:t})})},vt=function(e){var t=e.activeTab,n=Object(a.useState)(t),r=Object(Ne.a)(n,1)[0],c=Object(l.g)(),i=j(),s=function(e){"profile"===e&&c.replace({pathname:"/profile"}),"orderHistory"===e&&c.replace({pathname:"/profile/orders"}),"logOut"===e&&i(R())};return Object(ie.jsxs)("nav",{className:ht.a.menu,children:[Object(ie.jsx)(xt,{value:"profile",isActive:"profile"===r,onClick:s,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ie.jsx)(xt,{value:"orderHistory",isActive:"orderHistory"===r,onClick:s,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ie.jsx)(xt,{value:"logOut",isActive:!1,onClick:s,children:"\u0412\u044b\u0445\u043e\u0434"}),Object(ie.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})};function yt(){var e=Object(a.useState)({name:"",email:"",password:""}),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=u((function(e){return e.user})),i=c.userName,s=c.userEmail,o=j();Object(a.useEffect)((function(){o(H())}),[o]),Object(a.useEffect)((function(){r(Object(re.a)(Object(re.a)({},n),{},{name:i,email:s}))}),[]);var l=function(e){r(Object(re.a)(Object(re.a)({},n),{},Object(ot.a)({},e.target.name,e.target.value)))};return Object(ie.jsxs)("section",{className:_t.a.wrap,children:[Object(ie.jsx)(vt,{activeTab:"profile"}),Object(ie.jsxs)("form",{className:_t.a.profileInfo+" profile-inputs",onSubmit:function(e){e.preventDefault(),o(A(n,r))},children:[Object(ie.jsx)(be.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n.name,onChange:l,icon:"EditIcon",error:!1}),Object(ie.jsx)(be.Input,{type:"text",name:"email",placeholder:"e-mail",value:n.email,onChange:l,icon:"EditIcon",error:!1}),Object(ie.jsx)(be.Input,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:n.password,onChange:l,size:"default",icon:"EditIcon",error:!1}),Object(ie.jsxs)("div",{className:_t.a.buttonWrap,children:[Object(ie.jsx)(be.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(ie.jsx)(be.Button,{onClick:function(e){e.preventDefault(),r({name:i,email:s,password:""})},type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})}var Nt="WS_OPEN_CONNECTION",It="WS_CONNECTED_SUCCESSFULLY",Ct="WS_ERROR",Dt="WS_GOT_ORDERS",St="WS_SEND_MESSAGE",Et="WS_CLOSE_CONNECTION",kt="WS_DISCONNECTED",wt="SET_DETAILED_ORDER_IN_MODAL",Tt={openConnection:Nt,onOpen:It,onError:Ct,onGotOrders:Dt,sendMessage:St,closeConnection:Et,onClose:kt,setOrderInModal:wt},Lt=n(32),Rt=n.n(Lt);function Pt(e){var t=e.orderData,n=e.isPersonal,a=j(),r=Object(l.g)(),c=Object(l.h)(),i=u((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})),s=[];i&&t&&i.filter((function(e){return t.ingredients.includes(e._id)})).forEach((function(e){s.push(e.image_mobile)}));var o=[];o=function(e){if(e.length<1)return[];var t=e.map((function(e){return e}));return t.length>5&&(t.length=5),t.reverse(),t}(s);return Object(ie.jsxs)("article",{className:Rt.a.main,onClick:function(){a({type:X}),a({type:Y,value:"OrderCard"}),a({type:wt,orderData:t}),n?r.push({pathname:"".concat(r.location.pathname,"/").concat(t._id),state:{profileOrderModal:c}}):r.push({pathname:"".concat(r.location.pathname,"/").concat(t._id),state:{feedModal:c}})},children:[Object(ie.jsxs)("div",{className:Rt.a.plane+" mb-6",children:[Object(ie.jsxs)("span",{className:Rt.a.number+" text text_type_digits-default",children:["#",t.number]}),Object(ie.jsx)("span",{className:" text text_type_main-default text_color_inactive",children:qe(t.createdAt)})]}),Object(ie.jsx)("h4",{className:Rt.a.header+" text text_type_main-medium mb-2",children:t.name}),n?Object(ie.jsx)("span",{className:" text text_type_main-default text_color_inactive mb-2",children:Ye(t.status)}):null,Object(ie.jsxs)("div",{className:Rt.a.plane,children:[Object(ie.jsx)("div",{className:Rt.a.iconsContainer,children:o&&o.map((function(e,t){return function(e,t){return Object(ie.jsx)("div",{className:Rt.a.imgContainer,style:{backgroundImage:"url(".concat(e,")")}},t)}(e,t)}))}),Object(ie.jsxs)("div",{className:Rt.a.price,children:[Object(ie.jsx)("span",{className:" text text_type_digits-default mr-2",children:Ke(Ze(t,i))}),Object(ie.jsx)(be.CurrencyIcon,{type:"primary"})]})]})]})}var Bt=n(113),At=n.n(Bt);function Vt(e){var t=e.isPersonal,n=u((function(e){return e.ws.ordersData.orders})),a=[];return n&&t&&(a=(a=n.slice()).reverse()),Object(ie.jsxs)("article",{className:At.a.main,children:[!t&&n&&n.map((function(e){return Object(ie.jsx)(Pt,{orderData:e,isPersonal:t},e.number)})),t&&a&&a.map((function(e){return Object(ie.jsx)(Pt,{orderData:e,isPersonal:t},e.number)}))]})}function Mt(){var e=j();return Object(a.useEffect)((function(){e(H())}),[e]),Object(a.useEffect)((function(){return e({type:Tt.openConnection,url:v+"?token=".concat(h())}),function(){e({type:Tt.closeConnection})}}),[e]),Object(ie.jsxs)("section",{className:_t.a.wrap,children:[Object(ie.jsx)(vt,{activeTab:"orderHistory"}),Object(ie.jsx)("div",{className:_t.a.profileInfo+" profile-inputs",children:Object(ie.jsx)(Vt,{isPersonal:!0})})]})}function Ht(){var e=Object(l.i)().id,t=u((function(e){return e.burgerVendor.ingridientsData})).arrOfIngridients.find((function(t){return t._id===e}));return t?Object(ie.jsx)("div",{style:{paddingTop:80},children:Object(ie.jsx)(fe,{ingredientData:t})}):null}var Gt=n(16),Ut=n.n(Gt);function Ft(){var e=j(),t=u((function(e){return e.ws.ordersData.orders})),n=u((function(e){return e.ws.ordersData.totalToday})),r=u((function(e){return e.ws.ordersData.total})),c=[],i=[];t&&t.forEach((function(e){"done"===e.status?c.push(e.number):i.push(e.number)}));var s=function(e,t){return Object(ie.jsx)("li",{className:Ut.a.liElem+" text text_type_digits-default mb-2",children:e},t)};return Object(a.useEffect)((function(){return e({type:Tt.openConnection,url:y}),function(){e({type:Tt.closeConnection})}}),[e]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("section",{className:Ut.a.headerSection,children:Object(ie.jsx)("h1",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(ie.jsxs)("section",{className:Ut.a.feedData,children:[Object(ie.jsx)("section",{className:Ut.a.feedContent,children:Object(ie.jsx)(Vt,{isPersonal:!1})}),Object(ie.jsxs)("section",{className:Ut.a.feedChart,children:[Object(ie.jsxs)("div",{className:Ut.a.currentOrders,children:[Object(ie.jsxs)("div",{className:Ut.a.currentChart,children:[Object(ie.jsx)("span",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b"}),Object(ie.jsx)("ul",{className:Ut.a.ul,style:{color:"#00CCCC"},children:c.slice(0,18).map((function(e){return s(e,e)}))})]}),Object(ie.jsxs)("div",{className:Ut.a.currentChart,children:[Object(ie.jsx)("span",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(ie.jsx)("ul",{className:Ut.a.ul,children:i.slice(0,18).map((function(e){return s(e,e)}))})]})]}),Object(ie.jsxs)("div",{className:Ut.a.totalChart,children:[Object(ie.jsxs)("div",{className:Ut.a.totalBlock,children:[Object(ie.jsx)("span",{className:Ut.a.bigHeader+" text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f"}),Object(ie.jsx)("span",{className:" text text_type_digits-large mb-15",children:r})]}),Object(ie.jsxs)("div",{className:Ut.a.totalBlock,children:[Object(ie.jsx)("span",{className:Ut.a.bigHeader+" text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(ie.jsx)("span",{className:" text text_type_digits-large mb-15",children:n})]})]})]})]})]})}var Wt=function(e){var t,n=e.orderSource,r=j(),c=Object(l.i)().id,i=u((function(e){return e.ws.ordersData.orders}));return i&&(t=i.find((function(e){return e._id===c})),r({type:wt,orderData:t})),Object(a.useEffect)((function(){return"feed"===n&&r({type:Tt.openConnection,url:y}),"personalOrder"===n&&r({type:Tt.openConnection,url:v+"?token=".concat(h())}),function(){r({type:Tt.closeConnection})}}),[r,n]),Object(ie.jsxs)(ie.Fragment,{children:[i&&t?Object(ie.jsx)(st,{}):null,Object(ie.jsx)("br",{})]})};var zt,Jt=function(){var e=Object(l.g)(),t=Object(l.h)(),n="PUSH"===e.action||"REPLACE"===e.action,r=n&&t.state&&t.state.ingredientModal,c=n&&t.state&&t.state.feedModal,i=n&&t.state&&t.state.profileOrderModal,s=u((function(e){return e.burgerVendor.currentModalType})),d=u((function(e){return e.burgerVendor})).ingrInModalData,b=j(),m=function(){if(b({type:q}),b({type:Y,value:"none"}),"OrderDetails"===s)return e.push({state:{background:t}});e.goBack()};return Object(a.useEffect)((function(){b(H()),b(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){fetch(e).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){if(!Array.isArray(e.data))return Promise.reject(e);t({type:z,value:e.data})})).catch((function(e){t({type:J})}))}}("https://norma.nomoreparties.space/api/ingredients"))}),[b]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(xe,{}),Object(ie.jsxs)("main",{className:o.a.main,children:[Object(ie.jsxs)(l.d,{location:r||c||i||t,children:[Object(ie.jsx)(l.b,{path:"/login",children:Object(ie.jsx)(ut,{})}),Object(ie.jsx)(l.b,{path:"/registration",children:Object(ie.jsx)(jt,{})}),Object(ie.jsx)(l.b,{path:"/forgot-password",children:Object(ie.jsx)(bt,{})}),Object(ie.jsx)(l.b,{path:"/reset-password",children:Object(ie.jsx)(mt,{})}),Object(ie.jsx)(se,{path:"/profile",exact:!0,children:Object(ie.jsx)(yt,{})}),Object(ie.jsx)(se,{path:"/profile/orders",exact:!0,children:Object(ie.jsx)(Mt,{})}),Object(ie.jsx)(se,{path:"/profile/orders/:id",children:Object(ie.jsx)(Wt,{orderSource:"personalOrder"})}),Object(ie.jsx)(l.b,{path:"/ingredients/:id",children:Object(ie.jsx)(Ht,{})}),Object(ie.jsx)(l.b,{path:"/feed",exact:!0,children:Object(ie.jsx)(Ft,{})}),Object(ie.jsx)(l.b,{path:"/feed/:id",children:Object(ie.jsx)(Wt,{orderSource:"feed"})}),Object(ie.jsx)(l.b,{path:"/",exact:!0,children:Object(ie.jsx)(rt,{handleClose:m})})]}),r&&Object(ie.jsx)(l.b,{path:"/ingredients/:id",children:Object(ie.jsx)(me,{handleClose:m,children:Object(ie.jsx)(fe,{ingredientData:d})})}),c&&Object(ie.jsx)(l.b,{path:"/feed/:id",children:Object(ie.jsx)(me,{handleClose:m,children:Object(ie.jsx)(st,{})})}),i&&Object(ie.jsx)(se,{path:"/profile/orders/:id",children:Object(ie.jsx)(me,{handleClose:m,children:Object(ie.jsx)(st,{})})})]})]})},Xt=n(35),qt=n(88),Yt=n(114),Kt=n.n(Yt),Zt={_id:"",name:"",type:"main",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",__v:0,instanceID:0},Qt={ingridientsData:{arrOfIngridients:[],ingrDataIsLoading:!1,ingrDataHasError:!1},bun:Zt,draggableIngridients:[],modalIsVisible:!1,currentModalType:"none",ingrInModalData:{_id:"",name:"",type:"main",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",__v:0},orderData:{success:!1,name:"",order:{number:""}},constructorLoaderIsVisible:!1},$t={isLoggedIn:!1,userName:"",userEmail:"",canResetPassword:!1,hasResetPassword:!1,userChecked:!1},en={wsConnected:!1,wsError:!1,ordersData:{success:null,orders:[],total:0,totalToday:0},detailedOrder:{ingredients:[],_id:"",status:"pending",number:0,createdAt:"",updatedAt:"",name:""}},tn=Object(Xt.b)({burgerVendor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(re.a)(Object(re.a)({},e),{},{modalIsVisible:t.value});case U:return Object(re.a)(Object(re.a)({},e),{},{currentModalType:t.value});case F:return Object(re.a)(Object(re.a)({},e),{},{ingrInModalData:t.value});case W:return Object(re.a)(Object(re.a)({},e),{},{orderData:t.value});case z:return Object(re.a)(Object(re.a)({},e),{},{ingridientsData:{arrOfIngridients:t.value,ingrDataIsLoading:!1,ingrDataHasError:!1}});case J:return Object(re.a)(Object(re.a)({},e),{},{ingridientsData:{arrOfIngridients:[],ingrDataIsLoading:!1,ingrDataHasError:!0}});case X:return Object(re.a)(Object(re.a)({},e),{},{modalIsVisible:!0});case q:return Object(re.a)(Object(re.a)({},e),{},{modalIsVisible:!1});case Y:return Object(re.a)(Object(re.a)({},e),{},{currentModalType:t.value});case K:return Object(re.a)(Object(re.a)({},e),{},{bun:t.value});case Z:case Q:return Object(re.a)(Object(re.a)({},e),{},{draggableIngridients:[].concat(Object(qt.a)(e.draggableIngridients),[t.value])});case $:return Object(re.a)(Object(re.a)({},e),{},{draggableIngridients:t.value});case te:var n=Kt()(e.draggableIngridients,{$splice:[[t.indexOfDraggedIngr,1],[t.indexOfDroppedIngr,0,e.draggableIngridients[t.indexOfDraggedIngr]]]});return Object(re.a)(Object(re.a)({},e),{},{draggableIngridients:n});case ee:return Object(re.a)(Object(re.a)({},e),{},{bun:Zt,draggableIngridients:[]});case ne:return Object(re.a)(Object(re.a)({},e),{},{constructorLoaderIsVisible:t.value});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case D:return Object(re.a)(Object(re.a)({},e),{},{isLoggedIn:!0,userName:t.name,userEmail:t.email,userChecked:!0});case S:case E:return Object(re.a)(Object(re.a)({},e),{},{isLoggedIn:!1,userName:"",userEmail:"",userChecked:!0});case k:return Object(re.a)(Object(re.a)({},e),{},{canResetPassword:!0,hasResetPassword:!1,userChecked:!0});case w:return Object(re.a)(Object(re.a)({},e),{},{userChecked:!0,canResetPassword:!1,hasResetPassword:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return Object(re.a)(Object(re.a)({},e),{},{wsConnected:!0,wsError:!1});case Dt:return Object(re.a)(Object(re.a)({},e),{},{ordersData:t.ordersData});case kt:return Object(re.a)(Object(re.a)({},e),{},{wsConnected:!1});case Ct:return Object(re.a)(Object(re.a)({},e),{},{wsConnected:!1,wsError:!0});case wt:return Object(re.a)(Object(re.a)({},e),{},{detailedOrder:t.orderData});default:return e}}}),nn=n(115),an=(zt=Tt,function(e){var t=null;return function(n){return function(a){var r=e.dispatch,c=a.type,i=a.payload,s=zt.openConnection,o=zt.onOpen,l=zt.onError,d=zt.onGotOrders,u=zt.onClose,j=zt.sendMessage,b=zt.closeConnection;c===s&&(t=new WebSocket(a.url)),t&&c===b&&(t.close(),t=null),t&&(t.onopen=function(){r({type:o})},t.onerror=function(e){r({type:l})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);r({type:d,ordersData:n})},t.onclose=function(){r({type:u})}),t&&c===j&&t.send(JSON.stringify(Object(re.a)(Object(re.a)({},i),{},{token:h()}))),n(a)}}}),rn=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Xt.c)(Object(Xt.a)(nn.a,an)),cn=Object(Xt.d)(tn,rn);i.a.render(Object(ie.jsx)(r.a.StrictMode,{children:Object(ie.jsx)(Oe.a,{basename:"/react-stellar-burger",children:Object(ie.jsx)(d.a,{store:cn,children:Object(ie.jsx)(Jt,{})})})}),document.getElementById("root"))},25:function(e,t,n){e.exports={wrap:"auth-form_wrap__158Dt",form:"auth-form_form__3RPIf"}},30:function(e,t,n){e.exports={ingridiensContainer:"burger-ingredients_ingridiensContainer__16fM9",tabs:"burger-ingredients_tabs__1y6yZ",ingrDisplay:"burger-ingredients_ingrDisplay__3DhXk",ingrShowcase:"burger-ingredients_ingrShowcase__2so1l",ingrList:"burger-ingredients_ingrList__3t5xe",zaglushka:"burger-ingredients_zaglushka__IeyDf"}},32:function(e,t,n){e.exports={main:"feed-card_main__1Ds3t",plane:"feed-card_plane__13VG7",number:"feed-card_number__3kb-F",header:"feed-card_header__3fgx4",price:"feed-card_price__2lidk",iconsContainer:"feed-card_iconsContainer__1xca6",imgContainer:"feed-card_imgContainer__ENK4C"}},37:function(e,t,n){e.exports={container:"burger-constructor_container__mJDwn",chosenIngridients:"burger-constructor_chosenIngridients__kBswj",topIngridinet:"burger-constructor_topIngridinet__35RSH",bottomIngridinet:"burger-constructor_bottomIngridinet__2SGPL",draggableIngridinetContainer:"burger-constructor_draggableIngridinetContainer__2Tw2k",draggableItime:"burger-constructor_draggableItime__3on7s",draggableButton:"burger-constructor_draggableButton__3lS0m",totalBar:"burger-constructor_totalBar__bvuvq",loader:"burger-constructor_loader__22JJW"}},39:function(e,t,n){e.exports={wrap:"profile_wrap__1o5qa",profileInfo:"profile_profileInfo__UbS8v",buttonWrap:"profile_buttonWrap__3sRYX"}},61:function(e,t,n){e.exports={ingrCard:"ingridient-card_ingrCard__3SXR4",price:"ingridient-card_price__6mBMj",itemPic:"ingridient-card_itemPic__cfyXv",counter:"ingridient-card_counter__3mloX"}},82:function(e,t,n){e.exports={modal:"modal_modal__3eezL",closeButton:"modal_closeButton__3v-X8"}},83:function(e,t,n){e.exports={headerSection:"burger-vendor_headerSection__6LwEo",constructorContainer:"burger-vendor_constructorContainer__39UNx"}},85:function(e,t,n){e.exports={draggableItime:"draggable-item_draggableItime__2gdzt",draggableButton:"draggable-item_draggableButton__1QYCp"}},87:function(e,t,n){e.exports={tab:"profile-tab_tab__EZay6",tab_type_current:"profile-tab_tab_type_current__36q0q"}}},[[198,1,2]]]);
//# sourceMappingURL=main.a8d095e2.chunk.js.map